# 影核播放器 (CorePlayer)

<div align="center">

[![Flutter](https://img.shields.io/badge/Flutter-3.38.1-blue.svg)](https://flutter.dev)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-iOS%7CAndroid%7CWeb%7CWindows%7CmacOS%7CLinux-orange.svg)](#特性)

**影核播放器** - 影像播放新核心

*影核驱动，视界无界*

[English](./README_EN.md) | 中文

</div>

## 🎯 品牌理念

**影核**——影像播放的"核心引擎"，正如电脑的核心处理器，为每一次播放提供强劲动力。

- **影**：影像、视频，我们的播放对象
- **核**：核心、引擎，我们的技术实力

我们致力于打造最核心、最强劲、最流畅的视频播放体验，让每一帧画面都完美呈现。

## ✨ 核心优势

### 🚀 核心功能（已实现）
- ✅ **跨平台支持** - 支持iOS、Android、Web、Windows、macOS、Linux
- ✅ **智能文件选择** - 自动适配Web和桌面平台
- ✅ **完整播放控制** - 播放/暂停、进度调节、音量控制
- ✅ **全屏播放模式** - 沉浸式观影体验
- ✅ **响应式UI** - 现代化Material Design界面
- ✅ **自动隐藏控制栏** - 3秒后自动隐藏，专注观影
- ✅ **播放历史记录** - 自动记录观看进度，支持断点续播
- 🎯 **超高清视频支持** - 支持4K/8K视频格式，硬件加速解码

### 🎬 超高清视频播放功能（V1.3新增）
- 📹 **4K/8K视频支持** - 完整支持超高清视频格式播放
- 🚀 **智能硬件加速** - 自动检测并启用硬件解码（VideoToolbox/DXVA2/VAAPI等）
- 🎛️ **性能监控面板** - 实时显示CPU、GPU、内存占用，帧率监控
- 📊 **视频信息面板** - 详细显示编解码器、分辨率、码率等技术参数
- ⚙️ **播放质量设置** - 自动/高质量/低功耗/兼容模式切换
- 🔧 **右键上下文菜单** - 快速访问视频信息、性能监控、截图等功能
- 📈 **智能缓冲优化** - 针对超高清视频优化的缓冲策略
- 🎨 **性能指示器** - 颜色编码的性能指标，直观显示播放状态

### 🎨 播放历史增强功能（V1.2新增）
- 🔍 **搜索功能** - 按视频名称搜索播放历史
- 🏷️ **智能过滤** - 按观看状态、时间范围过滤
- 📱 **批量操作** - 多选和批量删除历史记录
- 🖼️ **缩略图支持** - 视频预览缩略图显示
- ⚙️ **自定义设置** - 个性化历史记录管理选项
- 📊 **播放统计** - 详细的观看数据统计

### ⚡ 技术特色
- 🔄 **无缝播放** - 支持多种视频格式
- ⏯️ **播放控制** - 播放/暂停、快进/快退
- 📊 **进度显示** - 实时显示播放进度和剩余时间
- 🔊 **音量调节** - 一键静音/恢复音量
- 📱 **全屏切换** - 支持横竖屏切换
- 📝 **播放历史** - 本地存储，最多保存50条记录
- ⏱️ **断点续播** - 智能记忆观看位置
- 🔄 **自动保存** - 每5秒自动保存播放进度
- 🚀 **硬件加速解码** - 支持VideoToolbox、DXVA2、VAAPI等硬件解码
- 📹 **超高清格式支持** - 完整支持4K/8K MKV、HEVC、VP9、AV1等格式
- 🎯 **智能性能监控** - 实时监控CPU、GPU、内存占用，自动优化播放
- 🎛️ **多音轨字幕支持** - 支持多音轨、多字幕轨道切换
- 🎨 **自适应缓冲** - 根据视频分辨率和网络状况智能调整缓冲

## 🚀 快速开始

### 环境要求
```
Flutter 3.38.1 或更高版本
Dart 3.10.0 或更高版本
```

### 安装依赖
```bash
flutter pub get
```

### 运行应用
```bash
# 运行到Chrome浏览器
flutter run -d chrome

# 运行到指定平台
flutter run -d android    # Android设备
flutter run -d ios       # iOS设备
flutter run -d macos     # macOS桌面
flutter run -d windows   # Windows桌面
flutter run -d linux     # Linux桌面
```

### 构建发布版本
```bash
# Web版本
flutter build web

# 桌面版本
flutter build windows
flutter build macos
flutter build linux

# 移动版本
flutter build apk
flutter build ios
```

## 🏗️ 项目架构

```
lib/
├── main.dart                 # 应用入口
└── screens/
    ├── home_screen.dart      # 主界面
    ├── player_screen.dart    # 播放器界面
    └── settings_screen.dart  # 设置界面
```

### 技术栈
- **框架**: Flutter 3.38.1
- **视频引擎**: media_kit + media_kit_video
- **文件选择**: file_picker
- **状态管理**: StatefulWidget
- **UI框架**: Material Design 3

## 🎯 使用说明

### 基本操作
1. **添加视频**: 点击主界面右下角的 `+` 按钮
2. **播放控制**: 点击播放器中央的大播放/暂停按钮
3. **进度调节**: 拖拽底部的进度条
4. **音量控制**: 点击右上角的音量图标
5. **全屏播放**: 点击右上角的全屏图标
6. **显示控制**: 点击屏幕任意位置显示/隐藏控制界面

### 播放历史功能 🆕
1. **查看历史**: 点击主界面"播放历史"标签页
2. **继续观看**: 点击历史记录项可选择从上次位置继续或重新开始
3. **进度显示**: 历史记录显示观看进度和最后播放时间
4. **搜索视频**: 在搜索框中输入关键词快速查找视频
5. **智能过滤**: 按观看状态、时间范围等条件筛选历史
6. **批量管理**: 长按进入多选模式，批量删除历史记录
7. **缩略图预览**: 显示视频缩略图，提升视觉体验
8. **自定义设置**: 在"播放历史设置"中个性化管理

### 超高清视频播放功能 🎯
1. **视频信息查看**: 右键点击视频 → 选择"视频信息"查看详细技术参数
2. **性能监控**: 右键点击视频 → 选择"查看性能信息"实时监控播放状态
3. **硬件加速**: 在设置中开启"播放质量"设置，选择"高质量模式"启用硬件解码
4. **切换性能覆盖层**: 右键点击视频 → 选择"切换性能覆盖层"显示实时性能指标
5. **格式支持**: 完整支持4K/8K MKV、HEVC/H.265、VP9、AV1等超高清格式

### 高级功能
- **自动隐藏**: 控制界面会在3秒后自动隐藏
- **手势操作**: 支持点击切换控制界面显示状态
- **跨平台**: 自动适配不同平台的文件选择方式
- **断点续播**: 自动保存观看进度，支持跨应用重启
- **智能管理**: 历史记录最多保存50条，30天后自动清理

## 🛣️ 产品路线

### 近期目标 (V1.1) - 核心优化
- ✅ **播放历史记录** - 已完成
- ✅ **播放历史增强** - 已完成（V1.2新增）
- [ ] 播放列表管理
- [ ] 深色/浅色主题切换

### 中期目标 (V1.3) - 功能增强
- ✅ **超高清视频支持** - 已完成（支持4K/8K、硬件加速）
- ✅ **性能监控系统** - 已完成（实时性能监控面板）
- ✅ **视频信息面板** - 已完成（详细技术参数显示）
- [ ] 字幕支持（SRT、ASS等格式）
- [ ] 播放速度调节（0.5x - 2.0x）
- [ ] 画面比例调节（16:9、4:3、自适应）
- [ ] 截图功能
- [ ] 播放列表管理
- [ ] 深色/浅色主题切换

### 长期愿景 (V2.0) - 生态建设
- [ ] 在线流媒体播放
- [ ] 网络视频下载
- [ ] AI智能推荐
- [ ] 视频转码功能
- [ ] 云端同步

## 📹 支持格式

### 容器格式
- ✅ **MP4** - 完全支持，硬件加速
- ✅ **MKV** - 完全支持，多音轨字幕
- ✅ **AVI** - 完全支持
- ✅ **MOV** - 完全支持，硬件加速
- ✅ **WebM** - 完全支持
- ✅ **FLV** - 基本支持
- ✅ **WMV** - 基本支持

### 视频编解码器
- ✅ **H.264/AVC** - 完全支持，硬件加速
- ✅ **HEVC/H.265** - 完全支持，硬件加速
- ✅ **VP9** - 完全支持，硬件加速
- ✅ **AV1** - 支持，部分硬件加速
- ✅ **MPEG-2** - 支持
- ✅ **MPEG-4** - 支持
- ✅ **WMV2/3** - 支持
- ✅ **DivX/XviD** - 支持

### 音频编解码器
- ✅ **AAC** - 完全支持
- ✅ **MP3** - 完全支持
- ✅ **AC3/Dolby Digital** - 支持
- ✅ **DTS** - 支持
- ✅ **FLAC** - 支持
- ✅ **Opus** - 支持
- ✅ **Vorbis** - 支持

### 分辨率支持
- ✅ **720p (HD)** - 完全支持
- ✅ **1080p (Full HD)** - 完全支持，硬件加速
- ✅ **1440p (2K)** - 支持，硬件加速
- ✅ **2160p (4K UHD)** - 支持，硬件加速
- ✅ **4320p (8K UHD)** - 支持，高性能设备硬件加速

### HDR支持
- ✅ **HDR10** - 支持
- ✅ **HLG** - 支持
- ⚠️ **Dolby Vision** - 部分支持

### 平台硬件加速支持
- ✅ **macOS**: VideoToolbox
- ✅ **Windows**: DXVA2/D3D11VA
- ✅ **Linux**: VAAPI/VDPAU
- ✅ **Android**: MediaCodec
- ✅ **iOS**: VideoToolbox
- ⚠️ **Web**: 依赖浏览器支持

## 🤝 贡献指南

我们欢迎所有开发者参与贡献！无论是bug修复、功能建议还是代码优化，我们都非常感激。

### 如何贡献
1. Fork 本仓库
2. 创建您的功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交您的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开一个 Pull Request

### 代码规范
- 遵循 Flutter 官方代码规范
- 保持代码简洁、可读性强
- 添加必要的注释说明
- 确保跨平台兼容性

## 📝 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- [Flutter](https://flutter.dev/) - 优秀的跨平台开发框架
- [media_kit](https://github.com/media-kit/media-kit) - 强大的视频播放引擎
- [file_picker](https://github.com/miguelpruivo/flutter_file_picker) - 便捷的文件选择插件

## 📞 联系我们

**作者**: peterfei

如果您有任何问题、建议或合作意向，欢迎通过以下方式联系我们：

- 📧 邮箱: [peterfeispace@gmail.com](mailto:peterfeispace@gmail.com)
- 🐙 GitHub: [https://github.com/peterfei/core-player](https://github.com/peterfei/core-player)
- 🐛 Issues: [项目Issues页面](https://github.com/peterfei/core-player/issues)

---

<div align="center">

**影核播放器** - 影像播放新核心

*让每一次播放都成为核心体验*

</div>